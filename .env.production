# EGDC v2 Los Papatos - Production Environment Configuration
# This file contains production environment variables for GCP Cloud Run deployment
# Sensitive values should be passed via Cloud Build substitutions or Secret Manager

# ==========================================
# APPLICATION CONFIGURATION
# ==========================================
NODE_ENV=production
NEXT_PUBLIC_APP_NAME="EGDC Inventory Platform"
NEXT_PUBLIC_APP_VERSION="2.0.0"
APP_URL="https://app.lospapatos.com"

# ==========================================
# DEPLOYMENT CONFIGURATION
# ==========================================
PORT=8080
HOSTNAME=0.0.0.0
BUILD_NUMBER=1.0.0

# ==========================================
# DATABASE CONFIGURATION
# ==========================================
# PostgreSQL connection URL - passed via Cloud Build substitution
DATABASE_URL=${_DATABASE_URL}
DATABASE_POOL_MAX=20
DATABASE_POOL_MIN=2
DATABASE_TIMEOUT=60000

# ==========================================
# AUTHENTICATION & SECURITY
# ==========================================
# NextAuth.js configuration
NEXTAUTH_URL="https://app.lospapatos.com"
NEXTAUTH_SECRET=${_NEXTAUTH_SECRET}

# Session configuration
SESSION_MAX_AGE=86400

# Multi-tenant security
TENANT_ISOLATION_ENABLED=true
TENANT_SUBDOMAIN_VALIDATION=true
DEFAULT_TENANT_SUBDOMAIN="admin"
MULTI_TENANT_MODE="true"

# ==========================================
# REDIS CONFIGURATION
# ==========================================
REDIS_URL=${_REDIS_URL}
REDIS_TLS_ENABLED=true

# ==========================================
# GOOGLE CLOUD PLATFORM
# ==========================================
GCP_PROJECT_ID=${PROJECT_ID}
GCP_SERVICE_ACCOUNT_EMAIL="run-runtime@los-papatos.iam.gserviceaccount.com"

# ==========================================
# MONITORING & OBSERVABILITY
# ==========================================
# Application Performance Monitoring
APM_ENABLED=true
APM_SERVICE_NAME="los-papatos-web"
APM_ENVIRONMENT="production"

# Logging configuration
LOG_LEVEL="info"
LOG_FORMAT="json"
STRUCTURED_LOGGING=true

# Metrics collection
METRICS_ENABLED=true
PROMETHEUS_METRICS=true

# ==========================================
# SECURITY SETTINGS
# ==========================================
# CORS configuration
ALLOWED_ORIGINS="https://app.lospapatos.com,https://stg.app.lospapatos.com,https://*.lospapatos.com"

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Security headers
SECURITY_HEADERS_ENABLED=true
CSP_ENABLED=true
ENABLE_SECURITY_HEADERS="true"
ENABLE_RATE_LIMITING="true"
ENABLE_AUDIT_LOGGING="true"

# Security configuration
BCRYPT_ROUNDS="12"
JWT_EXPIRY="7d"

# ==========================================
# FEATURE FLAGS (PHASE A)
# ==========================================
FEATURE_FULL_TEXT_SEARCH=true
FEATURE_BULK_OPERATIONS=true
FEATURE_PRODUCT_VARIANTS=true
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_MARKETPLACE_INTEGRATION=true

# Phase A Features
ENABLE_SUPPLIER_CATALOG="true"
ENABLE_MARKETPLACE_SYNC="true"
ENABLE_MULTI_LOCATION="true"

# ==========================================
# HEALTH CHECK & MONITORING
# ==========================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=5000
SHUTDOWN_TIMEOUT=30000

# ==========================================
# MERCADOLIBRE INTEGRATION
# ==========================================
# These would be set via Secret Manager in production
MERCADOLIBRE_CLIENT_ID=${_MERCADOLIBRE_CLIENT_ID}
MERCADOLIBRE_CLIENT_SECRET=${_MERCADOLIBRE_CLIENT_SECRET}
MERCADOLIBRE_REDIRECT_URI="https://app.lospapatos.com/api/auth/mercadolibre/callback"

# ==========================================
# EMAIL CONFIGURATION
# ==========================================
# Production email settings - passed via substitutions
SMTP_HOST=${_SMTP_HOST}
SMTP_PORT=587
SMTP_USER=${_SMTP_USER}
SMTP_PASSWORD=${_SMTP_PASSWORD}
SMTP_FROM="noreply@lospapatos.com"

# ==========================================
# PERFORMANCE SETTINGS
# ==========================================
# Skip environment validation in production builds
SKIP_ENV_VALIDATION=false

# Debug settings (disabled in production)
DEBUG_MODE=false
VERBOSE_LOGGING=false