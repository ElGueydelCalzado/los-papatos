# EGDC v2 Phase A - Production Environment Configuration
# Security: All sensitive values should be loaded from secrets management
# Target: 99.9% uptime with optimal performance

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

NODE_ENV=production
PORT=8080
HOSTNAME=0.0.0.0

# Application versioning
APP_VERSION=2.0.0
BUILD_NUMBER=1.0.0
DEPLOYMENT_ENV=production

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Primary database (write operations)
DATABASE_URL=postgresql://postgres:password@postgres-primary:5432/egdc?sslmode=require&application_name=egdc-app

# Read replica (read operations for performance)
DATABASE_READ_URL=postgresql://postgres:password@postgres-replica:5432/egdc?sslmode=require&application_name=egdc-app-read

# Connection pool settings
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=20
DATABASE_POOL_ACQUIRE_TIMEOUT=30000
DATABASE_POOL_IDLE_TIMEOUT=10000

# Query timeouts
DATABASE_QUERY_TIMEOUT=30000
DATABASE_STATEMENT_TIMEOUT=60000

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis Sentinel for high availability
REDIS_URL=redis://redis-sentinel:26379
REDIS_MASTER_NAME=egdc-redis-master
REDIS_SENTINEL_PASSWORD=

# Redis connection settings
REDIS_CONNECT_TIMEOUT=5000
REDIS_COMMAND_TIMEOUT=3000
REDIS_RETRY_ATTEMPTS=3
REDIS_RETRY_DELAY=1000

# Cache settings
CACHE_TTL_DEFAULT=3600
CACHE_TTL_SHORT=300
CACHE_TTL_LONG=86400

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# NextAuth.js configuration
NEXTAUTH_URL=https://egdc.example.com
NEXTAUTH_SECRET=fallback-secret-for-build-only-not-secure
NEXTAUTH_COOKIE_SECURE=true
NEXTAUTH_COOKIE_SAME_SITE=lax

# Session configuration
SESSION_STRATEGY=jwt
SESSION_MAX_AGE=86400
SESSION_UPDATE_AGE=3600

# JWT configuration
JWT_SECRET=fallback-jwt-secret-for-build-only-not-secure
JWT_ALGORITHM=HS256
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# Password security
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_SPECIAL_CHARS=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_UPPERCASE=true

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_MESSAGE="Too many requests, please try again later"

# =============================================================================
# API CONFIGURATION
# =============================================================================

# API versioning
API_VERSION=v1
API_BASE_PATH=/api

# Request limits
MAX_REQUEST_SIZE=50mb
MAX_JSON_SIZE=10mb
MAX_URL_ENCODED_SIZE=10mb

# CORS settings
CORS_ORIGIN=https://egdc.example.com,https://api.egdc.example.com,https://admin.egdc.example.com
CORS_CREDENTIALS=true
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With,X-API-Key

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Metrics collection
ENABLE_METRICS=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Health checks
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_RETRIES=3

# Logging configuration
LOG_LEVEL=info
LOG_FORMAT=json
LOG_MAX_SIZE=100m
LOG_MAX_FILES=10
LOG_DATE_PATTERN=YYYY-MM-DD

# Application Performance Monitoring
APM_ENABLED=true
APM_SERVICE_NAME=egdc-production
APM_ENVIRONMENT=production
APM_SAMPLE_RATE=0.1

# Distributed tracing
TRACING_ENABLED=true
TRACING_SAMPLE_RATE=0.05
JAEGER_ENDPOINT=http://jaeger:14268/api/traces

# =============================================================================
# FILE STORAGE & UPLOADS
# =============================================================================

# File upload limits
MAX_FILE_SIZE=10mb
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/webp,application/pdf,text/csv
UPLOAD_DEST=/app/uploads

# Cloud storage (if using S3/GCS)
CLOUD_STORAGE_ENABLED=true
CLOUD_STORAGE_BUCKET=
CLOUD_STORAGE_REGION=us-central1
CLOUD_STORAGE_PUBLIC_URL=https://

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# SMTP settings
SMTP_HOST=localhost
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=
SMTP_PASSWORD=

# Email addresses
FROM_EMAIL=noreply@egdc.example.com
SUPPORT_EMAIL=support@egdc.example.com
ADMIN_EMAIL=admin@egdc.example.com

# =============================================================================
# MULTI-TENANT CONFIGURATION
# =============================================================================

# Tenant isolation
TENANT_ISOLATION_LEVEL=database
DEFAULT_TENANT_LIMITS_USERS=1000
DEFAULT_TENANT_LIMITS_PRODUCTS=10000
DEFAULT_TENANT_LIMITS_STORAGE_GB=10

# Subdomain configuration
DOMAIN_SUFFIX=.egdc.example.com
WILDCARD_SSL_ENABLED=true
AUTO_PROVISIONING_ENABLED=true

# =============================================================================
# PERFORMANCE OPTIMIZATION
# =============================================================================

# Caching
CACHE_ENABLED=true
CACHE_COMPRESSION=true
CACHE_SERIALIZATION=json

# HTTP caching
HTTP_CACHE_MAX_AGE=3600
HTTP_CACHE_STALE_WHILE_REVALIDATE=86400
HTTP_CACHE_STALE_IF_ERROR=86400

# Compression
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6
COMPRESSION_THRESHOLD=1024

# Static assets
STATIC_CACHE_MAX_AGE=31536000
STATIC_IMMUTABLE=true

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================

# Payment processing
STRIPE_PUBLISHABLE_KEY=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# Analytics
GOOGLE_ANALYTICS_ID=
MIXPANEL_TOKEN=

# Error tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=${BUILD_NUMBER}
SENTRY_SAMPLE_RATE=0.1

# =============================================================================
# MARKETPLACE INTEGRATIONS
# =============================================================================

# MercadoLibre
MERCADOLIBRE_CLIENT_ID=
MERCADOLIBRE_CLIENT_SECRET=
MERCADOLIBRE_REDIRECT_URI=https://api.egdc.example.com/api/marketplace/mercadolibre/callback

# Shopify
SHOPIFY_API_KEY=
SHOPIFY_API_SECRET=
SHOPIFY_WEBHOOK_SECRET=

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================

# Backup configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=

# Point-in-time recovery
PITR_ENABLED=true
WAL_ARCHIVE_ENABLED=true
WAL_RETENTION_HOURS=168

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Feature toggles
FEATURE_NEW_INVENTORY_SYNC=true
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_BULK_OPERATIONS=true
FEATURE_MARKETPLACE_AUTO_SYNC=true
FEATURE_AI_RECOMMENDATIONS=false

# Beta features
BETA_FEATURES_ENABLED=false
BETA_USER_PERCENTAGE=5

# =============================================================================
# DEVELOPMENT & DEBUG (Production: disabled)
# =============================================================================

# Debug settings (should be false in production)
DEBUG=false
VERBOSE_LOGGING=false
ENABLE_PLAYGROUND=false
ENABLE_DEBUG_ROUTES=false

# Next.js specific
NEXT_TELEMETRY_DISABLED=1
ANALYZE_BUNDLE=false

# =============================================================================
# COMPLIANCE & PRIVACY
# =============================================================================

# GDPR compliance
GDPR_COMPLIANCE_ENABLED=true
DATA_RETENTION_DAYS=2555  # 7 years
COOKIE_CONSENT_REQUIRED=true

# Security headers
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_ENABLED=true
CSP_REPORT_URI=https://api.egdc.example.com/api/security/csp-report

# =============================================================================
# SCALING & LOAD BALANCING
# =============================================================================

# Horizontal scaling
MAX_INSTANCES=10
MIN_INSTANCES=2
SCALE_UP_THRESHOLD=70
SCALE_DOWN_THRESHOLD=30

# Load balancer health checks
HEALTH_CHECK_PATH=/api/health
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# =============================================================================
# NOTIFICATION SYSTEMS
# =============================================================================

# Slack integration
SLACK_WEBHOOK_URL=
SLACK_CHANNEL_ALERTS=#alerts
SLACK_CHANNEL_DEPLOYMENTS=#deployments

# PagerDuty
PAGERDUTY_INTEGRATION_KEY=
PAGERDUTY_SERVICE_KEY=

# SMS notifications
SMS_PROVIDER=twilio
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# =============================================================================
# MAINTENANCE MODE
# =============================================================================

# Maintenance settings
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="System temporarily unavailable for maintenance"
MAINTENANCE_ALLOWED_IPS=127.0.0.1,::1
MAINTENANCE_END_TIME=""

# =============================================================================
# TIMEZONE & LOCALIZATION
# =============================================================================

# Timezone settings
TZ=UTC
DEFAULT_LOCALE=en-US
SUPPORTED_LOCALES=en-US,es-MX,pt-BR

# Date/time formats
DATE_FORMAT=YYYY-MM-DD
TIME_FORMAT=HH:mm:ss
DATETIME_FORMAT=YYYY-MM-DD HH:mm:ss

# =============================================================================
# WORKER PROCESSES
# =============================================================================

# Background job processing
WORKER_ENABLED=true
WORKER_CONCURRENCY=5
WORKER_MAX_RETRY_ATTEMPTS=3
WORKER_RETRY_DELAY=5000

# Queue settings
QUEUE_DEFAULT_PRIORITY=normal
QUEUE_HIGH_PRIORITY_LIMIT=100
QUEUE_BATCH_SIZE=10

# =============================================================================
# CONTENT DELIVERY
# =============================================================================

# CDN settings
CDN_ENABLED=true
CDN_DOMAIN=
CDN_CACHE_TTL=86400
CDN_PURGE_ON_DEPLOY=true

# Image optimization
IMAGE_OPTIMIZATION_ENABLED=true
IMAGE_QUALITY=85
IMAGE_FORMATS=webp,avif,jpg,png
IMAGE_SIZES=320,640,768,1024,1280,1920